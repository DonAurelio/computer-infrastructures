# Monitor Script

This folder contains a set of files used to monitor the status of the system and collect the monitoring data easily.

## Monitoring

The monitor.sh file must be placed configured as a cron job to periodically log the system status. This script can be used on serveral machines. 

## Logs Collection

The *logcollector.py*, *logserver.py* and *servers.py* were developed to retrieve log files from diferent machines from a single one. So we have to place the *logserver.py* on each machine we want to serve the logs. Then from othe machine running the *logserver.py* and *servers.py* we will collect the served logs in one place. 

### Setting Up logserver

Logserver is a Python 2.7 web server application developed in flask. This application will be deployed on each machine running a *monitor.sh* script. logserver will serve the files generated by monitor.sh, out.log and err.log. We use systemd to deploy logserver as a linux service as follows.

Create the file **monitor.service** and place it on **/etc/systemd/system/**

```sh
[Unit]
Description=Tests Logs Server

[Service]
Environment=FLASK_APP=/home/<user-home-directory>/monitor/logserver.py
User=<username>
Group=<username>
WorkingDirectory=/home/<user-home-directory>/monitor
ExecStart=flask run -h 0.0.0.0 -p 5000
Restart=on-failure
Type=simple

[Install]
WantedBy=multi-user.target
```

